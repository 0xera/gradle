## New and noteworthy

Here are the new features introduced in this Gradle release.

<!--
IMPORTANT: if this is a patch release, ensure that a prominent link is included in the foreword to all releases of the same minor stream.
Add-->

<!--
### Example new and noteworthy
-->

### Java software model

#### Compile avoidance

This version of Gradle further optimizes on avoiding recompiling consuming libraries after non-ABI breaking changes. Since 2.9, if a library declares an API, Gradle creates a "[stubbed API jar](userguide/java_software.html)". This enables avoiding recompiling any consuming library if the application binary interface (ABI) of the library doesn't change. This version of Gradle extends this functionality to libraries that don't declare their APIs, speeding up builds with incremental changes in most Java projects, small or large. In particular, a library `A` that depend on a library `B` will not need to be recompiled in the following cases:

* a private method is added to `B`
* a method body is changed in `B`
* order of methods is changed in `B`

This feature only works for local libraries, not external dependencies. More information about compile avoidance can be found in the [userguide](userguide/java_software.html).

#### Standalone JUnit test suite execution

It is now possible to declare a JUnit test suite as a software component. This incubating feature is however limited to standalone tests because the test suite doesn't yet have a component under test: it is possible to depend on a local library, but not *testing* a local library. This is the first step in providing first class support for test suites in the Java software model.

Declaring a test suite can be done like this:

    model {
        components {
            mySuite(JUnitTestSuiteSpec) {
                junitVersion '4.12'
            }
        }
    }

Then the suite can be executed running the `:mySuiteTest` task.

### Model rule improvements

#### `@ComponentBinaries` works for elements of `testSuites`

#### Fine grained application of rules

TBD - A new kind of rule method is now available, which can be used to apply additional rules to some target.

This kind of method is annotated with `@Rules`. The first parameter defines a `RuleSource` type to apply, and the second parameter defines the target element to apply the rules to.

Two new annotations have been added:

- `@RuleInput` can be attached to a property of a `RuleSource` to indicate that the property defines an input for all rules on the `RuleSource`.
- `@RuleTarget` can be attached to a property of a `RuleSource` to indicate that the property defines the target for the `RuleSource`.

### Controlling test executing order in TestNG

This version of Gradle adds support for TestNG preserveOrder and groupByInstances options to control test order execution. More information about these features can be found in the [userguide](userguide/java_plugin.html#test_execution_order).

New options can be enabled in the useTestNG block:

    test {
        useTestNG {
            preserveOrder true
            groupByInstances true
        }
    }

This feature was contributed by [Richard Bergoin](https://github.com/kenji21).

### Better support for developing plugins with the Software Model

#### Managed source set types

The `LanguageSourceSet` type can now be extended via `@Managed` subtypes, allowing for declaration of `@Managed` source sets without having to provide a default implementation.

Example:

    @Managed
    interface MarkdownSourceSet extends LanguageSourceSet {
        boolean isGenerateIndex()
        void setGenerateIndex(boolean generateIndex)
        boolean isSmartQuotes()
        void setSmartQuotes(boolean smartQuotes)
    }
    class RegisterMarkdown extends RuleSource {
        @LanguageType
        void registerMarkdown(LanguageTypeBuilder<MarkdownSourceSet> builder) {
            builder.setLanguageName("Markdown")
        }
    }
    apply plugin: 'language-base'
    apply plugin: RegisterMarkdown

    model {
        md(MarkdownSourceSet) {
            generateIndex = true
        }
    }

### Support for Spock framework for Java projects in Build Init Plugin

It is now possible to use [Spock framework](https://code.google.com/p/spock/) instead of JUnit for Java projects in the [Build Init Plugin](userguide/build_init_plugin.html) by using the following command:

    gradle init --type java-library --with spock

This feature was contributed by [Dylan Cali](https://github.com/calid).

### Ivy Publishing Improvements

The Ivy descriptor file generated by the ['ivy-publish'](userguide/publishing_ivy.html) plugin now includes dependency exclude information. Exclusions configured in your Gradle
build script on project or external module dependencies will be included in the published _ivy.xml_ file.

This feature was contributed by [Eike Kohnert](https://github.com/andrena-eike-kohnert).

### IDE integration improvements

#### Tooling API exposes source language level on Idea model

The `IdeaProject` and the `IdeaModule` model now exposes the Java source language level via the
<a href="javadoc/org/gradle/tooling/model/idea/IdeaProject.html#getJavaSourceSettings">`getJavaSourceSettings()`</a> method.
IDE providers use this method to automatically determine the source language level of a Idea project and its associated Modules.

#### Tooling API exposes java runtime and target bytecode level on Idea model

The `IdeaProject` and the `IdeaModule` model now exposes the target java runtime and the target bytecode level via the
<a href="javadoc/org/gradle/tooling/model/idea/IdeaProject.html#getJavaSourceSettings">`getJavaSourceSettings()`</a> method.
IDE providers use this method to determine the target runtime and bytecode level information. The target bytecode level
for `IdeaModule` is derived from the
<a href="javadoc/org/gradle/api/plugins/JavaPluginConvention.html#getTargetCompatibilityLevel">`targetCompatibilityLevel`</a>
convention property.

#### TODO

- Target Java version and JVM for Eclipse
- Generated `.classpath` project references correct JVM version

### Continuous build improvements

Continuous build will now trigger a rebuild when an input file is changed during build execution.

### Support for Twirl source sets to use Java default imports

Previously, when compiling Twirl source sets, Gradle would assume that Scala default imports should be used.  A developer can now
specify that Java default imports should be used when compiling a Twirl source set.

    model {
        components {
            play {
                twirlTemplates {
                    defaultImports = TwirlImports.JAVA
                }
            }
        }
    }

## Promoted features

Promoted features are features that were incubating in previous versions of Gradle but are now supported and subject to backwards compatibility.
See the User guide section on the “[Feature Lifecycle](userguide/feature_lifecycle.html)” for more information.

The following are the features that have been promoted in this Gradle release.

<!--
### Example promoted
-->

## Fixed issues

## Deprecations

Features that have become superseded or irrelevant due to the natural evolution of Gradle become *deprecated*, and scheduled to be removed
in the next major Gradle version (Gradle 3.0). See the User guide section on the “[Feature Lifecycle](userguide/feature_lifecycle.html)” for more information.

The following are the newly deprecated items in this Gradle release. If you have concerns about a deprecation, please raise it via the [Gradle Forums](http://discuss.gradle.org).

<!--
### Example deprecation
-->

## Potential breaking changes

### Excludes in published Ivy metadata

Dependency exclusions are now added to the published ivy.xml when using the 'ivy-publish' plugin. This may result in dependencies being resolved by consuming projects of newly
published modules to change. If consuming projects depend on the excluded dependencies you may have to explicitly add these dependencies to the consuming project.

### Update to HttpClient 4.4.1

Gradle uses the Apache HttpComponents HttpClient library internally for features like dependency resolution and publication. This library has been updated
from version 4.2.2 to 4.4.1. As part of this upgrade, certain system properties are no longer taken into account when creating clients used for resolving and
publishing dependencies from HTTP repositories. Specifically, the 'http.keepAlive' and 'http.maxConnections' system properties are now ignored. For more information
see the HttpClient [release notes](http://www.apache.org/dist/httpcomponents/httpclient/RELEASE_NOTES-4.4.x.txt).

### Scala plugin no longer adds 'scalaConsole' tasks

Adding the 'scala' plugin to your build will no longer create 'scalaConsole' tasks which launch a Scala REPL from the Gradle build. This capability has been
removed due to lack of documentation and support for running with the Gradle Daemon. If you wish to continue to have such a task as part of your build, you
can explicitly configure a [`JavaExec`](dsl/org.gradle.api.tasks.JavaExec.html) task to do so.

### Eclipse Plugin adds explicit java target runtime to Classpath

The `.classpath` file generated via `eclipseClasspath` task provided by the Eclipse Plugin now points to an explicit Java Runtime Version instead of
using the default JRE configured in the Eclipse IDE. The naming convention follows the Eclipse defaults.
To tweak the name of the Java runtime to use, the name can be configured via

    eclipse {
        jdt {
            javaRuntimeName = "JavaSE-1.8"
        }
    }

### SourceTask adds injected getPatternSetFactory method

An injected getPatternSetFactory method has been added to the `org.gradle.api.tasks.SourceTask` class. This is a possible breaking change for unit tests of tasks that extend the SourceTask class.

### Changes to Play standalone distributions

#### Names of dependency jars

When copying dependencies into the Play distribution's `lib` directory, we now rename all jar files to include `group` or `project path` information.

#### Tar distribution task

The Gradle Play plugin now adds a `Tar` task to build standalone Play distributions (`createPlayBinaryTarDist`). A tar and zip distribution will be created when executing `dist`.

#### Zip distribution task

The name of the `Zip` task to create standalone Play distributions is now `createPlayBinaryZipDist`.

#### Name of distribution archives

If you would like to have a different archive name (by default, `playBinary.zip` or `playBinary.tar`), you must configure the `baseName` property for the `Zip` or `Tar` tasks. When determining the final archive name, Gradle will concatenate the `baseName` and `extension`.

For tar files, Gradle will automatically switch to using `.tgz` or `.tbz2` when the `compression` property is changed.

Previously, you could directly set the `archiveName`.  `version`, `appendix` and `classifier` are still ignored when determining the archive name.

### Software model changes

- Deprecated `CollectionBuilder` interface removed.
- Deprecated `ManagedSet` interface removed.
- The `assemble` task now builds only those binaries for components defined in `components`. It does not build binaries for test suites defined in `testSuites`.
- The `LanguageBasePlugin` has been split into two separate plugins: `LanguageBasePlugin` and `BinaryBasePlugin`.
- The `LanguageBasePlugin` no longer applies the full component model.
- The `@LanguageType` annotation implicitly applies only the `LanguageBasePlugin`.
- The `@BinaryType` annotation implicitly applies only the `BinaryBasePlugin`.

### TestKit indicates compatibility for target Gradle version

Gradle 2.9 exposes methods through the `GradleRunner` API for providing a target Gradle distribution used to executed the build. There are known, functional limitations of TestKit
for particular Gradle versions. If a certain feature is not supported, TestKit thrown an exception. Please check the [user guide](userguide/test_kit.html#sub:test-kit-compatibility)
for an overview of known TestKit limitations.

## External contributions

We would like to thank the following community members for making contributions to this release of Gradle.

* [Niklas Baudy](https://github.com/vanniktech) - PMD plugin code cleanup
* [Richard Bergoin](https://github.com/kenji21) - Test coverage for NTLM support
* [Dylan Cali](https://github.com/calid) - Add support for Spock framework for Java projects in [Build Init Plugin](userguide/build_init_plugin.html)
* [Illya Gerasymchuk](https://github.com/iluxonchik) - Fix typos in Windows batch scripts
* [Eike Kohnert](https://github.com/andrena-eike-kohnert) - Support for publishing dependency exclusions in Ivy descriptors
* [Johnny Lim](https://github.com/izeye) - Documentation improvements
* [Christopher O'Connell](https://github.com/lordoku) - Remove 'scalaConsole' task
* [Tobias Riemenschneider](https://github.com/riemenschneider) - Add support for TestNG's preserveOrder and groupByInstances options
* [Jochen Schalanda](https://github.com/joschi) - Support for configuring Twirl source sets to use Java default imports
* [Sebastian Schuberth](https://github.com/sschuberth) - Simplify LoggingCommandLineConverter
* [Martin Steiger](https://github.com/msteiger) - Eclipse and Idea tasks warn on missing dependencies

We love getting contributions from the Gradle community. For information on contributing, please see [gradle.org/contribute](http://gradle.org/contribute).

## Known issues

Known issues are problems that were discovered post release that are directly related to changes made in this release.

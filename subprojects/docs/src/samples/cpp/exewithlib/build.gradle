project(":lib") {
    apply plugin: "cpp-lib"
    
    libraries.main.spec.sharedLibrary()
}

project(":exe") {
    apply plugin: "cpp-exe"
    cpp {
        sourceSets {
            main {
                headers {
                    // Include the headers from the lib project
                    srcDir project(":lib").cpp.sourceSets.main.headers
                }
            }
        }
    }
    executables {
        main {
            spec {
                source project(":lib").libraries.main.spec
            }
        }
    }
}

task build(dependsOn: project(":exe").compileMain)
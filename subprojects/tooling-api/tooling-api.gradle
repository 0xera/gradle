import org.gradle.internal.nativeplatform.OperatingSystem

dependencies {
    groovy libraries.groovy

    publishCompile project(':core')
    publishCompile project(':baseServices')
    publishCompile project(':wrapper')

    // lots of integTest errors otherwise
    integTestRuntime project(':ide')
}

useTestFixtures()

// is some of this unnecessary, or should it be moved into gradle/integTest ?
integTest {
    dependsOn ':publishLocalArchives', ':binZip'

    if (OperatingSystem.current().isWindows()) {
        //Temporary hack to investigate windows build issues
        exclude "**/org/gradle/integtests/tooling/**"
    }

    doFirst {
        systemProperties['integTest.distsDir'] = rootProject.distsDir.absolutePath
        systemProperties['integTest.libsRepo'] = rootProject.file('build/repo')
    }
}

daemonIntegTest {
    exclude "**/org/gradle/integtests/tooling/**" //tooling integ tests use daemon anyway, don't rerun
}



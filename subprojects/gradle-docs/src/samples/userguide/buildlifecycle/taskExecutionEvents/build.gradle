task ok

task broken(dependsOn: ok) << {
    throw new RuntimeException('broken')
}

gradle.taskGraph.beforeTask { Task task ->
    println "executing $task ..."
}

gradle.taskGraph.afterTask { Task task, TaskExecutionResult result ->
    if (result.failure) {
        println "FAILED"
    }
    else {
        println "done"
    }
}
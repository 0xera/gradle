package org.gradle.api.internal.plugins.osgi;

import spock.lang.Specification

public class OsgiHelperTest extends Specification {
    def "convert to OSGi-compliant version"() {
        def helper = new OsgiHelper()

        expect:
        helper.getVersion(projectVersion) == osgiVersion

        where:
        projectVersion   | osgiVersion
        "1"              | "1"
        "1.2"            | "1.2"
        "1.2.3"          | "1.2.3"
        "1.2.3.4"        | "1.2.3.4"
        "1.2.3.4.5"      | "1.2.3.4_5"
        "1.2.3.4.5.6"    | "1.2.3.4_5_6"
        "1.2.3.4.5.6.7"  | "1.2.3.4_5_6_7"
        "1.2.3.4.5-6.7"  | "1.2.3.4_5-6_7"
        "1.2.3.4-5.6.7"  | "1.2.3.4-5_6_7"
        "1.2.3.ABC"      | "1.2.3.ABC"
        "1.2.ABC"        | "1.2.0.ABC"
        "1.ABC"          | "1.0.0.ABC"
        "1-ABC"          | "1.0.0.ABC"
        "1-20110303"     | "1.0.0.20110303"
        "1.2-20110303"   | "1.2.0.20110303"
        "1.2.3-20110303" | "1.2.3.20110303"
        "1_20110303"     | "1.0.0.20110303"
        "1.2_20110303"   | "1.2.0.20110303"
        "1.2.3_20110303" | "1.2.3.20110303"
        "1.2.3_20110303" | "1.2.3.20110303"
        "1*20110303"     | "1.0.0.20110303"
        "1*20110303"     | "1.0.0.20110303"
        "1.2*20110303"   | "1.2.0.20110303"
        "1.2.3*20110303" | "1.2.3.20110303"
        "1@20110303"     | "1.0.0.20110303"
        "1.2@20110303"   | "1.2.0.20110303"
        "1.2.3@20110303" | "1.2.3.20110303"
        "1!20110303"     | "1.0.0.20110303"
        "1.2!20110303"   | "1.2.0.20110303"
        "1.2.3!20110303" | "1.2.3.20110303"
        "1%20110303"     | "1.0.0.20110303"
        "1.2%20110303"   | "1.2.0.20110303"
        "1.2.3%20110303" | "1.2.3.20110303"
        "1^20110303"     | "1.0.0.20110303"
        "1.2^20110303"   | "1.2.0.20110303"
        "1.2.3^20110303" | "1.2.3.20110303"
        "1/20110303"     | "1.0.0.20110303"
        "1.2/20110303"   | "1.2.0.20110303"
        "1.2.3/20110303" | "1.2.3.20110303"
        '1-20.11$03@0#3' | "1.0.0.20_11_03_0_3"
        "100000"         | "100000"
    }
}

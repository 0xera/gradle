// Copyright (C) 2023 Gradle, Inc.
//
// Licensed under the Creative Commons Attribution-Noncommercial-ShareAlike 4.0 International License.;
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      https://creativecommons.org/licenses/by-nc-sa/4.0/
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

[[implemention_plugins]]
= Implementing Plugins

While there are many types of plugins -- script, pre-compiled script, or binary plugins -- there are also many choices for implementing each type of plugin:

[cols="~,~,~,~,~,~"]
|===
|*#* |*Using:* |*Type:* |*The Plugin is:* |*Created by applying:* |*Use?*

|1
|Kotlin DSL
|Script
|in a `.gradle.kts` file as an abstract class that implements the `apply(Project project)` method of the `Plugin<Project>` interface.
|
|No

|2
|Kotlin DSL
|Pre-compiled script
|a `.gradle.kts` file
|`id("kotlin-dsl")`
|Yes

|3
|Kotlin DSL
|Binary
|a `.gradle.kts` file
|`id("kotlin-dsl")` +
`id("com.gradle.plugin-publish")`
|No

|4
|Groovy DSL
|Script
|in a `.gradle` file as an abstract class that implements the `apply(Project project)` method of the `Plugin<Project>` interface.
|
|No

|5
|Groovy DSL
|Pre-compiled script
|a `.gradle` file
|`id("groovy-gradle-plugin")`
|No

|6
|Groovy DSL
|Binary
|a `.gradle` file
|`id("groovy-gradle-plugin")` +
`id("com.gradle.plugin-publish")`
|No

|7
|Java
|Pre-compiled script
|an abstract class that implements the `apply(Project project)` method of the `Plugin<Project>` interface.
|`id("java-gradle-plugin")`
|Yes

|8
|Java
|Binary
|an abstract class that implements the `apply(Project project)` method of the `Plugin<Project>` interface.
|`id("java-gradle-plugin")` +
`id("com.gradle.plugin-publish")`
|Yes

|9
|Kotlin
|Pre-compiled script
|an abstract class that implements the `apply(Project project)` method of the `Plugin<Project>` interface.
|`id("java-gradle-plugin")`
`id("org.jetbrains.kotlin.jvm")`
|No

|10
|Kotlin
|Binary
|an abstract class that implements the `apply(Project project)` method of the `Plugin<Project>` interface.
|`id("java-gradle-plugin")` +
`id("org.jetbrains.kotlin.jvm")` +
`id("com.gradle.plugin-publish")`
|Yes

|11
|Groovy
|Pre-compiled script
|an abstract class that implements the `apply(Project project)` method of the `Plugin<Project>` interface.
|`id("java-gradle-plugin")`
`id("groovy")`
|No

|12
|Groovy
|Binary
|an abstract class that implements the `apply(Project project)` method of the `Plugin<Project>` interface.
|`id("java-gradle-plugin")` +
`id("groovy")` +
`id("com.gradle.plugin-publish")`
|No

|13
|Scala
|Pre-compiled script
|an abstract class that implements the `apply(Project project)` method of the `Plugin<Project>` interface.
|`id("java-gradle-plugin")`
`id("scala")`
|No

|14
|Scala
|Binary
|an abstract class that implements the `apply(Project project)` method of the `Plugin<Project>` interface.
|`id("java-gradle-plugin")` +
`id("scala")` +
`id("com.gradle.plugin-publish")`
|No
|===

<<custom_plugins#sec:build_script_plugins,*Script plugins*>> are hard to maintain, test, and do not support defining new reusable types.
They are not recommended.

<<custom_plugins#sec:precompile_script_plugin,*Pre-compiled script*>> plugins are best used as <<custom_plugins#sec:convention_plugins,*convention plugins*>>.

<<custom_plugins#sec:custom_plugins_standalone_project,*Binary plugins*>> should be used when logic needs to be shared across independent projects.
They allow for structuring code into classes and packages, are cacheable, support versioning, and are easily testable.

It is recommended to use a statically-typed language like *Java* or *Kotlin* for implementing plugins to reduce the likelihood of binary incompatibilities.
If using Groovy, consider using `@groovy.transform.CompileStatic`.

The recommendation to use a statically-typed language is independent of the language choice for writing tests for your plugin code.

If you suspect issues with your plugin code, try creating a link:https://scans.gradle.com/[Build Scan] to identify bottlenecks.
The link:https://github.com/gradle/gradle-profiler[Gradle profiler] can help automate Build Scan generation and gather more low-level information.
